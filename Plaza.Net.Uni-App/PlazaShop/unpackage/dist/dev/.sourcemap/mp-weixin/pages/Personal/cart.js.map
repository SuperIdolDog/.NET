{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/Lenovo/Desktop/CSharp项目/就业项目/Plaza/Plaza.Net.Uni-App/PlazaShop/pages/personal/cart.vue?158e","webpack:///C:/Users/Lenovo/Desktop/CSharp项目/就业项目/Plaza/Plaza.Net.Uni-App/PlazaShop/pages/personal/cart.vue?4d16","webpack:///C:/Users/Lenovo/Desktop/CSharp项目/就业项目/Plaza/Plaza.Net.Uni-App/PlazaShop/pages/personal/cart.vue?ece0","webpack:///C:/Users/Lenovo/Desktop/CSharp项目/就业项目/Plaza/Plaza.Net.Uni-App/PlazaShop/pages/personal/cart.vue?8497","uni-app:///pages/personal/cart.vue","webpack:///C:/Users/Lenovo/Desktop/CSharp项目/就业项目/Plaza/Plaza.Net.Uni-App/PlazaShop/pages/personal/cart.vue?b48e","webpack:///C:/Users/Lenovo/Desktop/CSharp项目/就业项目/Plaza/Plaza.Net.Uni-App/PlazaShop/pages/personal/cart.vue?c5e0"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","triggered","swipeOptions","text","style","backgroundColor","cartList","selectedGoods","allIds","computed","total","shop","t","discount","sum","onLoad","sto_name","selectedIds","goods","id","good_img","good_name","good_price","good_num","spec","stock","methods","mergeCartByShop","list","map","clickitem","uni","url","onRefresh","setTimeout","shopChange","ids","goodsChange","allChange","syncShop","syncAll","calcTotal","handleSwipe","onSubmit"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;AACsC;;;AAGzF;AACgL;AAChL,gBAAgB,yLAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,6VAEN;AACP,KAAK;AACL;AACA,aAAa,yTAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,iVAEN;AACP,KAAK;AACL;AACA,aAAa,+WAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,qUAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxGA;AAAA;AAAA;AAAA;AAAqpB,CAAgB,0qBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eC2HzqB;EACAC;IACA;MACAC;MACAC,eACA;QAAAC;QAAAC;UAAAC;QAAA;MAAA,GACA;QAAAF;QAAAC;UAAAC;QAAA;MAAA,EACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MAAA;MACA;MACA;QAAA,OACAC;UACA;YACAC;UACA;QACA;MAAA,EACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;MACA;QAAA,OACAH;UACA;QACA;MAAA,EACA;MACA;IACA;EACA;EACAI;IACA;IACA,eACA;MACAC;MACAC;MACAC,QACA;QAAAC;QAAAC;QAAAC;QAAAC;QAAAC;QAAAC;QAAAC;MAAA,GACA;QAAAN;QAAAC;QAAAC;QAAAC;QAAAC;QAAAC;QAAAC;MAAA;IAGA,GACA;MACAT;MACAC;MACAC,QACA;QAAAC;QAAAC;QAAAC;QAAAC;QAAAC;QAAAC;QAAAC;MAAA;IAEA,GACA;MACAT;MACAC;MACAC,QACA;QAAAC;QAAAC;QAAAC;QAAAC;QAAAC;QAAAC;QAAAC;MAAA;IAEA,EACA;IAEA;EACA;EACAC;IACA,cACAC;MACA;MACAC;QAAA;QACA;UACAC;YACAb;YACAC;YACAC;UACA;QACA;QACA;MACA;MACA;IACA;IAEAY;MACAC;QAAAC;MAAA;IACA;IACAC;MAAA;MACA;MACAC;QAAA;MAAA;IACA;IACAC;MAAA;MACA;MACA;MACA;QAAA;MAAA;MACA;QACAC;UACA;QACA;QACAzB;MACA;QACAyB;UACA;UACA;QACA;QACAzB;MACA;MACA;IACA;IACA0B;MACA;MACA;MACA;IACA;IACAC;MACA;MACA,+BACA;QAAA;UAAA;QAAA;MAAA,KACA;MACA;QACA3B;MACA;MACA;IACA;IACA4B;MAAA;MACA;QACA;UAAA;QAAA;QACA;UAAA;QAAA;QACA5B;MACA;IACA;IACA6B;MAAA;MACA;QAAA;UAAA;QAAA;MAAA;MACA,cACAhC;QAAA;MAAA,KACA,UACA;IACA;IACAiC;MAAA;MACA;QACA;QACA;MACA;IACA;IACAC;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;QACAX;MACA;IACA;IACAY;MACA;QACAZ;QACA;MACA;MACAA,8BACA,6FACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACnSA;AAAA;AAAA;AAAA;AAAowC,CAAgB,iuCAAG,EAAC,C;;;;;;;;;;;ACAxxC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/personal/cart.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/personal/cart.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./cart.vue?vue&type=template&id=17a1ca66&scoped=true&\"\nvar renderjs\nimport script from \"./cart.vue?vue&type=script&lang=js&\"\nexport * from \"./cart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cart.vue?vue&type=style&index=0&id=17a1ca66&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"17a1ca66\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/personal/cart.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cart.vue?vue&type=template&id=17a1ca66&scoped=true&\"","var components\ntry {\n  components = {\n    uEmpty: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-empty/u-empty\" */ \"@/uni_modules/uview-ui/components/u-empty/u-empty.vue\"\n      )\n    },\n    uCheckboxGroup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-checkbox-group/u-checkbox-group\" */ \"@/uni_modules/uview-ui/components/u-checkbox-group/u-checkbox-group.vue\"\n      )\n    },\n    uCheckbox: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-checkbox/u-checkbox\" */ \"@/uni_modules/uview-ui/components/u-checkbox/u-checkbox.vue\"\n      )\n    },\n    uText: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-text/u-text\" */ \"@/uni_modules/uview-ui/components/u-text/u-text.vue\"\n      )\n    },\n    uSwipeAction: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-swipe-action/u-swipe-action\" */ \"@/uni_modules/uview-ui/components/u-swipe-action/u-swipe-action.vue\"\n      )\n    },\n    uSwipeActionItem: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-swipe-action-item/u-swipe-action-item\" */ \"@/uni_modules/uview-ui/components/u-swipe-action-item/u-swipe-action-item.vue\"\n      )\n    },\n    \"u-Image\": function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u--image/u--image\" */ \"@/uni_modules/uview-ui/components/u--image/u--image.vue\"\n      )\n    },\n    uNumberBox: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-number-box/u-number-box\" */ \"@/uni_modules/uview-ui/components/u-number-box/u-number-box.vue\"\n      )\n    },\n    uButton: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-button/u-button\" */ \"@/uni_modules/uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.cartList.length\n  var l1 = !(g0 === 0)\n    ? _vm.__map(_vm.cartList, function (shop, sIndex) {\n        var $orig = _vm.__get_orig(shop)\n        var l0 = _vm.__map(shop.goods, function (goods, gIndex) {\n          var $orig = _vm.__get_orig(goods)\n          var g1 = goods.good_price.toFixed(2)\n          return {\n            $orig: $orig,\n            g1: g1,\n          }\n        })\n        return {\n          $orig: $orig,\n          l0: l0,\n        }\n      })\n    : null\n  var g2 = _vm.total.toFixed(2)\n  var g3 = _vm.discount ? _vm.discount.toFixed(2) : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l1: l1,\n        g2: g2,\n        g3: g3,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cart.vue?vue&type=script&lang=js&\"","<template>\n  <view>\n    <!-- 空购物车 -->\n    <u-empty\n      v-if=\"cartList.length === 0\"\n      mode=\"car\"\n      text=\"购物车空空如也\"\n      margin-top=\"200rpx\"\n    />\n\n    <!-- 商品列表 -->\n    <scroll-view\n      v-else\n      class=\"scroll-box\"\n      scroll-y\n    >\n      <view class=\"list-inner\">\n        <view\n          v-for=\"(shop, sIndex) in cartList\"\n          :key=\"sIndex\"\n          class=\"shop-wrap\"\n        >\n          <!-- 店铺标题 -->\n          <view class=\"shop-header\">\n            <u-checkbox-group :value=\"shop.selectedIds\" @change=\"shopChange(sIndex)\">\n              <u-checkbox :name=\"shop.sto_name\" shape=\"circle\" activeColor=\"#ff5000\"/>\n            </u-checkbox-group>\n            <u-text :text=\"shop.sto_name\" size=\"28rpx\" margin=\"0 0 0 12rpx\"/>\n            <view class=\"shop-extra\">\n              <u-text text=\"领券\" size=\"24rpx\" color=\"#666\" margin=\"0 12rpx 0 0\"/>\n              <u-text text=\"进店\" size=\"24rpx\" color=\"#666\"/>\n            </view>\n          </view>\n\n          <!-- 商品 -->\n          <u-swipe-action>\n            <u-swipe-action-item\n              v-for=\"(goods, gIndex) in shop.goods\"\n              :key=\"goods.id\"\n              :options=\"swipeOptions\"\n              @click=\"handleSwipe($event, sIndex, gIndex)\"\n            >\n              <view class=\"goods-box\">\n                <!-- 复选 -->\n                <u-checkbox-group :value=\"selectedGoods\" @change=\"goodsChange\">\n                  <u-checkbox :name=\"goods.id\" shape=\"circle\" activeColor=\"#ff5000\"/>\n                </u-checkbox-group>\n\n                <!-- 图片 -->\n                <u--image\n                  :src=\"goods.good_img\"\n                  width=\"160rpx\"\n                  height=\"160rpx\"\n                  radius=\"10\"\n                  margin=\"0 20rpx\"\n                />\n\n                <!-- 信息 -->\n                <view class=\"goods-info\">\n                  <u-text :text=\"goods.good_name\" size=\"28rpx\" lines=\"2\"/>\n                  <u-text text=\"7天无理由\" size=\"20rpx\" color=\"#999\" margin=\"6rpx 0 0 0\"/>\n                  <u-text\n                    :text=\"'规格：' + goods.spec + ' | 库存：' + goods.stock\"\n                    size=\"22rpx\"\n                    color=\"#999\"\n                    margin=\"6rpx 0 0 0\"\n                  />\n                  <view class=\"price-line\">\n                    <u-text\n                      :text=\"'￥' + goods.good_price.toFixed(2)\"\n                      color=\"#ff5000\"\n                      size=\"30rpx\"\n                      bold\n                    />\n                    <u-number-box\n                      v-model=\"goods.good_num\"\n                      :min=\"1\"\n                      :max=\"goods.stock\"\n                      integer\n                      size=\"24rpx\"\n                      @change=\"calcTotal\"\n                      @blur=\"calcTotal\"\n                    />\n                  </view>\n                </view>\n              </view>\n            </u-swipe-action-item>\n          </u-swipe-action>\n        </view>\n      </view>\n    </scroll-view>\n\n    <!-- 结算栏 -->\n    <view class=\"footer\">\n      <u-checkbox-group :value=\"allIds\" @change=\"allChange\">\n        <u-checkbox name=\"all\" shape=\"circle\" activeColor=\"#ff5000\">\n          <u-text text=\"全选\" size=\"26rpx\" margin=\"0 0 0 8rpx\"/>\n        </u-checkbox>\n      </u-checkbox-group>\n\n      <view class=\"total-box\">\n        <u-text text=\"合计：\" size=\"26rpx\"/>\n        <u-text\n          :text=\"'￥' + total.toFixed(2)\"\n          color=\"#ff5000\"\n          size=\"30rpx\"\n          bold\n        />\n        <u-text\n          v-if=\"discount\"\n          :text=\"'(已省￥' + discount.toFixed(2) + ')'\"\n          size=\"22rpx\"\n        />\n      </view>\n\n      <u-button type=\"error\" shape=\"circle\" size=\"small\" @click=\"onSubmit\">\n        <u-text :text=\"'结算(' + sum + ')'\" size=\"26rpx\" color=\"#fff\"/>\n      </u-button>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      triggered: false,\n      swipeOptions: [\n        { text: '移入收藏', style: { backgroundColor: '#ffb800' } },\n        { text: '删除', style: { backgroundColor: '#ff5000' } }\n      ],\n      cartList: [],\n      selectedGoods: [],\n      allIds: []\n    };\n  },\n  computed: {\n    total() {\n      let t = 0;\n      this.cartList.forEach(shop =>\n        shop.goods.forEach(g => {\n          if (this.selectedGoods.includes(g.id)) {\n            t += g.good_price * g.good_num;\n          }\n        })\n      );\n      return t;\n    },\n    discount() {\n      return this.total > 100 ? this.total * 0.05 : 0;\n    },\n    sum() {\n      let s = 0;\n      this.cartList.forEach(shop =>\n        shop.goods.forEach(g => {\n          if (this.selectedGoods.includes(g.id)) s += g.good_num;\n        })\n      );\n      return s;\n    }\n  },\n  onLoad() {\n    /* 模拟后端返回的数据 */\n    const rawList = [\n      {\n        sto_name: '天天果园牛栏前店',\n        selectedIds: [],\n        goods: [\n          { id: 's1g1', good_img: '/static/logo.png', good_name: '佳沛新西兰阳光金果奇异果6粒', good_price: 68.09, good_num: 2, spec: '6粒装', stock: 100 },\n          { id: 's1g2', good_img: '/static/bg.png',  good_name: '佳沛新西兰阳光金果奇异果12粒', good_price: 98,    good_num: 1, spec: '12粒装', stock: 80 },\n         \n        ]\n      },\n      {\n        sto_name: '天天果园车陂店',\n        selectedIds: [],\n        goods: [\n          { id: 's2g1', good_img: '/static/1.jpg', good_name: '广西贵妃芒2斤', good_price: 29.9, good_num: 3, spec: '2斤装', stock: 200 }\n        ]\n      },\n      {\n        sto_name: '天天果园车陂店',\n        selectedIds: [],\n        goods: [\n          { id: 's3g1', good_img: '/static/1.jpg', good_name: '广西贵妃芒2斤', good_price: 29.9, good_num: 3, spec: '2斤装', stock: 200 }\n        ]\n      }\n    ];\n\n    this.cartList = this.mergeCartByShop(rawList);\n  },\n  methods: {\n    /* 按店铺名合并商品 */\n    mergeCartByShop(list) {\n      const map = {};\n      list.forEach(shop => {\n        if (!map[shop.sto_name]) {\n          map[shop.sto_name] = {\n            sto_name: shop.sto_name,\n            selectedIds: [],\n            goods: []\n          };\n        }\n        map[shop.sto_name].goods.push(...shop.goods);\n      });\n      return Object.values(map);\n    },\n\n    clickitem(url) {\n      uni.navigateTo({ url });\n    },\n    onRefresh() {\n      this.triggered = true;\n      setTimeout(() => (this.triggered = false), 800);\n    },\n    shopChange(sIndex) {\n      const shop = this.cartList[sIndex];\n      const checked = !shop.selectedIds.includes(shop.sto_name);\n      const ids = shop.goods.map(g => g.id);\n      if (checked) {\n        ids.forEach(id => {\n          if (!this.selectedGoods.includes(id)) this.selectedGoods.push(id);\n        });\n        shop.selectedIds = [shop.sto_name];\n      } else {\n        ids.forEach(id => {\n          const idx = this.selectedGoods.indexOf(id);\n          if (idx > -1) this.selectedGoods.splice(idx, 1);\n        });\n        shop.selectedIds = [];\n      }\n      this.syncAll();\n    },\n    goodsChange(e) {\n      this.selectedGoods = [...e.detail.value];\n      this.syncShop();\n      this.syncAll();\n    },\n    allChange(e) {\n      const checked = e.detail.value.includes('all');\n      this.selectedGoods = checked\n        ? this.cartList.flatMap(shop => shop.goods.map(g => g.id))\n        : [];\n      this.cartList.forEach(shop => {\n        shop.selectedIds = checked ? [shop.sto_name] : [];\n      });\n      this.allIds = checked ? ['all'] : [];\n    },\n    syncShop() {\n      this.cartList.forEach(shop => {\n        const ids = shop.goods.map(g => g.id);\n        const selected = ids.filter(id => this.selectedGoods.includes(id));\n        shop.selectedIds = selected.length === ids.length ? [shop.sto_name] : [];\n      });\n    },\n    syncAll() {\n      const allIds = this.cartList.flatMap(shop => shop.goods.map(g => g.id));\n      this.allIds =\n        allIds.length && allIds.every(id => this.selectedGoods.includes(id))\n          ? ['all']\n          : [];\n    },\n    calcTotal() {\n      this.$nextTick(() => {\n        this.syncShop();\n        this.syncAll();\n      });\n    },\n    handleSwipe(e, sIndex, gIndex) {\n      if (e.index === 1) {\n        const g = this.cartList[sIndex].goods[gIndex];\n        const idx = this.selectedGoods.indexOf(g.id);\n        if (idx > -1) this.selectedGoods.splice(idx, 1);\n        this.cartList[sIndex].goods.splice(gIndex, 1);\n        if (!this.cartList[sIndex].goods.length) this.cartList.splice(sIndex, 1);\n        this.syncShop();\n        this.syncAll();\n      } else {\n        uni.$u.toast('已移入收藏');\n      }\n    },\n    onSubmit() {\n      if (!this.sum) {\n        uni.$u.toast('请选择商品');\n        return;\n      }\n      uni.$u.toast(\n        `共 ${this.sum} 件，实付￥${(this.total - this.discount).toFixed(2)}`\n      );\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\npage {\n  background: #f6f6f6;\n  height: 100%;\n}\n\n/* ===== scroll-view 容器 ===== */\n.scroll-box {\n  height: 100vh;\n  /* #ifdef H5 */\n  height: calc(100vh - 180rpx); /* tabBar 50px + footer 100rpx */\n  /* #endif */\n  padding-bottom: 100rpx;          // 预留 footer 高度\n  box-sizing: border-box;\n}\n\n/* ===== 店铺卡片 ===== */\n.shop-wrap {\n  margin: 20rpx;\n  background: #fff;\n  border-radius: 16rpx;\n  overflow: hidden;\n  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.04);\n}\n\n/* 店铺标题 */\n.shop-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 24rpx;\n  border-bottom: 1rpx solid #ebedf0;\n  background: #fffaf8;\n}\n.shop-extra {\n  display: flex;\n  align-items: center;\n}\n\n/* 商品卡片 */\n.goods-box {\n  display: flex;\n  align-items: flex-start;\n  padding: 24rpx;\n  background: #fff;\n  &:not(:last-child) {\n    border-bottom: 1rpx solid #ebedf0;\n  }\n}\n.goods-info {\n  flex: 1;\n  margin-left: 20rpx;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n.price-line {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-top: 12rpx;\n}\n\n/* ===== 底部结算栏 ===== */\n.footer {\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: 100rpx;\n  background: #fff;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 24rpx;\n  box-shadow: 0 -4rpx 12rpx rgba(0, 0, 0, 0.05);\n\n  /* #ifdef H5 */\n  z-index: 999;\n  padding-bottom: constant(safe-area-inset-bottom); /* iOS 11.0 */\n  padding-bottom: env(safe-area-inset-bottom);      /* iOS 11.2+ */\n  bottom: 50px; /* tabBar 高度，H5 通常是 50px */\n  /* #endif */\n}\n.total-box {\n  white-space: nowrap;\n}\n</style>","import mod from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cart.vue?vue&type=style&index=0&id=17a1ca66&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cart.vue?vue&type=style&index=0&id=17a1ca66&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1755959992754\n      var cssReload = require(\"D:/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}