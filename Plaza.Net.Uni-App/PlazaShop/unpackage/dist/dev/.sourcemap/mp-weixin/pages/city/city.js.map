{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/Users/Lenovo/Desktop/CSharp项目/就业项目/Plaza/Plaza.Net.Uni-App/PlazaShop/pages/city/city.vue?4768","webpack:///C:/Users/Lenovo/Desktop/CSharp项目/就业项目/Plaza/Plaza.Net.Uni-App/PlazaShop/pages/city/city.vue?222a","webpack:///C:/Users/Lenovo/Desktop/CSharp项目/就业项目/Plaza/Plaza.Net.Uni-App/PlazaShop/pages/city/city.vue?2f0b","uni-app:///pages/city/city.vue","webpack:///C:/Users/Lenovo/Desktop/CSharp项目/就业项目/Plaza/Plaza.Net.Uni-App/PlazaShop/pages/city/city.vue?0845","webpack:///C:/Users/Lenovo/Desktop/CSharp项目/就业项目/Plaza/Plaza.Net.Uni-App/PlazaShop/pages/city/city.vue?551b"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","loading","orderType","store","name","distance_text","min_price","packing_fee","address","street","goods","id","icon","goods_list","content","price","images","use_property","number","property","desc","values","value","is_default","ads","image","currentCateId","cateScrollTop","menuScrollIntoView","cart","goodDetailModalVisible","good","cartPopupVisible","computed","goodCartNum","menuCartNum","getCartGoodsNumber","getCartGoodsPrice","disabledPay","spread","methods","SET_ORDER_TYPE","takout","uni","url","handleMenuTap","handleGoodsScroll","handleAddToCart","cate_id","props_text","props","handleReduceFromCart","showGoodDetailModal","closeGoodDetailModal","changePropertyDefault","p","getGoodSelectedProps","handlePropertyAdd","handlePropertyReduce","handleAddToCartInModal","openCartPopup","handleCartClear","title","success","handleCartItemAdd","handleCartItemReduce","toPay"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;AACsC;;;AAGzF;AACgL;AAChL,gBAAgB,yLAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,iVAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,2RAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACzHA;AAAA;AAAA;AAAA;AAAqpB,CAAgB,0qBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCuPzqB;EACAC;IACA;MACAC;MACAC;MAAA;MACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;QACAC;MACA;MACAC,QACA;QACAC;QACAP;QACAQ;QACAC,aACA;UACAF;UACAP;UACAU;UACAC;UACAC;UACAC;UACAC;QACA,GACA;UACAP;UACAP;UACAU;UACAC;UACAC;UACAC;UACAE,WACA;YACAf;YACAgB;YACAC,SACA;cAAAC;cAAAX;cAAAY;YAAA,GACA;cAAAD;cAAAX;cAAAY;YAAA,GACA;cAAAD;cAAAX;cAAAY;YAAA;UAEA,EACA;UACAL;QACA;MAEA,GACA;QACAP;QACAP;QACAQ;QACAC,aACA;UACAF;UACAP;UACAU;UACAC;UACAC;UACAC;UACAE,WACA;YACAf;YACAgB;YACAC,SACA;cAAAC;cAAAX;cAAAY;YAAA,GACA;cAAAD;cAAAX;cAAAY;YAAA,GACA;cAAAD;cAAAX;cAAAY;YAAA;UAEA,EACA;UACAL;QACA;MAEA,EACA;MACAM,MACA;QAAAC;MAAA,GACA;QAAAA;MAAA,EACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MAAA;MACA;QAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAAA;MACA;QAAA;UAAA;QAAA;MAAA;IACA;IACAC;MACA;QAAA;MAAA;IACA;IACAC;MACA;QAAA;MAAA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;MACAC;QAAAC;MAAA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;IAAA,CACA;IACAC;MACA,gCACA;QAAA;MAAA,EACA;MACA;QACA;MACA;QACA;UACApC;UACAqC;UACA5C;UACAW;UACAG;UACAO;UACAR;UACAgC;UACAC;QACA;MACA;IACA;IACAC;MACA;QAAA;MAAA;MACA;QACA;QACA;UACA;QACA;MACA;IACA;IACAC;MACA;QAAAlC;MAAA;MACA;IACA;IACAmC;MACA;IACA;IACAC;MAAA;MACA;QACAC;UACA;QACA;MACA;IACA;IACAC;MAAA;MACA;MACA;MACAzB;QACAwB;UACA;YACAL;UACA;QACA;MACA;MACA;IACA;IACAO;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA,8CACA;QACAV;QACAC;MAAA,EACA;MACA;QAAAvC;MAAA;MACA;IACA;IACAiD;MACA;IACA;IACAC;MAAA;MACAlB;QACAmB;QACAhD;QACAiD;UAAA;UACA;YACA;YACA;UACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACAvB;QAAAC;MAAA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACzdA;AAAA;AAAA;AAAA;AAAowC,CAAgB,iuCAAG,EAAC,C;;;;;;;;;;;ACAxxC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/city/city.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/city/city.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./city.vue?vue&type=template&id=5fb12034&scoped=true&\"\nvar renderjs\nimport script from \"./city.vue?vue&type=script&lang=js&\"\nexport * from \"./city.vue?vue&type=script&lang=js&\"\nimport style0 from \"./city.vue?vue&type=style&index=0&id=5fb12034&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5fb12034\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/city/city.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./city.vue?vue&type=template&id=5fb12034&scoped=true&\"","var components\ntry {\n  components = {\n    uLoadingPage: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-loading-page/u-loading-page\" */ \"@/uni_modules/uview-ui/components/u-loading-page/u-loading-page.vue\"\n      )\n    },\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uImage: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-image/u-image\" */ \"@/uni_modules/uview-ui/components/u-image/u-image.vue\"\n      )\n    },\n    uBadge: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-badge/u-badge\" */ \"@/uni_modules/uview-ui/components/u-badge/u-badge.vue\"\n      )\n    },\n    uButton: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-button/u-button\" */ \"@/uni_modules/uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-popup/u-popup\" */ \"@/uni_modules/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    uTag: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-tag/u-tag\" */ \"@/uni_modules/uview-ui/components/u-tag/u-tag.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = !_vm.loading\n    ? _vm.__map(_vm.goods, function (item, index) {\n        var $orig = _vm.__get_orig(item)\n        var m0 = _vm.menuCartNum(item.id)\n        return {\n          $orig: $orig,\n          m0: m0,\n        }\n      })\n    : null\n  var l2 = !_vm.loading\n    ? _vm.__map(_vm.goods, function (item, index) {\n        var $orig = _vm.__get_orig(item)\n        var l1 = _vm.__map(item.goods_list, function (good, key) {\n          var $orig = _vm.__get_orig(good)\n          var m1 = good.use_property ? _vm.goodCartNum(good.id) : null\n          var m2 = !good.use_property ? _vm.goodCartNum(good.id) : null\n          var m3 = !good.use_property ? _vm.goodCartNum(good.id) : null\n          var m4 = !good.use_property && m3 ? _vm.goodCartNum(good.id) : null\n          return {\n            $orig: $orig,\n            m1: m1,\n            m2: m2,\n            m3: m3,\n            m4: m4,\n          }\n        })\n        return {\n          $orig: $orig,\n          l1: l1,\n        }\n      })\n    : null\n  var g0 = !_vm.loading ? _vm.cart.length : null\n  var m5 = _vm.getGoodSelectedProps(_vm.good)\n  var m6 = m5 ? _vm.getGoodSelectedProps(_vm.good) : null\n  var m7 =\n    _vm.orderType == \"takeout\" && _vm.store.packing_fee\n      ? parseFloat(_vm.store.packing_fee)\n      : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.cartPopupVisible = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        l2: l2,\n        g0: g0,\n        m5: m5,\n        m6: m6,\n        m7: m7,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./city.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./city.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"container\">\n    <!-- 加载中状态 -->\n    <u-loading-page :loading=\"loading\" loading-mode=\"circle\"></u-loading-page>\n\n    <!-- 主内容 -->\n    <view class=\"main\" v-if=\"!loading\">\n      <!-- 导航栏 -->\n      <view class=\"nav\">\n        <view class=\"header\">\n          <view class=\"left\" v-if=\"orderType == 'takein'\">\n            <view class=\"store-name\">\n              <text>{{ store.name }}</text>\n              <u-icon name=\"arrow-right\" size=\"16\"></u-icon>\n            </view>\n            <view class=\"store-location\">\n              <u-image src=\"/static/images/order/location.png\" width=\"30rpx\" height=\"30rpx\" class=\"mr-10\"></u-image>\n              <text>距离您 {{ store.distance_text }}</text>\n            </view>\n          </view>\n          <view class=\"left overflow-hidden\" v-else>\n            <view class=\"d-flex align-items-center overflow-hidden\">\n              <u-image src=\"/static/images/order/location.png\" width=\"30rpx\" height=\"30rpx\" class=\"mr-10\"></u-image>\n              <view class=\"u-font-32 u-font-weight-bold u-line-1\">\n                {{ address.street }}\n              </view>\n            </view>\n            <view class=\"u-font-24 u-tips-color overflow-hidden u-line-1\">\n              由<text class=\"u-main-color\" style=\"margin: 0 10rpx\">{{ store.name }}</text>配送\n            </view>\n          </view>\n          <view class=\"right\">\n            <view class=\"dinein\" :class=\"{ active: orderType == 'takein' }\" @click=\"SET_ORDER_TYPE('takein')\">\n              <text>自取</text>\n            </view>\n            <view class=\"takeout\" :class=\"{ active: orderType == 'takeout' }\" @click=\"takout\">\n              <text>外卖</text>\n            </view>\n          </view>\n        </view>\n        <view class=\"coupon\">\n          <text class=\"title\">\"霸气mini卡\"超级购券活动，赶紧去购买</text>\n          <u-icon name=\"arrow-right\" size=\"14\"></u-icon>\n        </view>\n      </view>\n\n      <!-- 商品内容 -->\n      <view class=\"content\">\n        <!-- 左侧分类菜单 -->\n        <scroll-view class=\"menus\" scroll-y :scroll-into-view=\"menuScrollIntoView\" scroll-with-animation>\n          <view class=\"wrapper\">\n            <view\n              class=\"menu\"\n              :id=\"`menu-${item.id}`\"\n              :class=\"{ current: item.id === currentCateId }\"\n              v-for=\"(item, index) in goods\"\n              :key=\"index\"\n              @click=\"handleMenuTap(item.id)\"\n            >\n              <text>{{ item.name }}</text>\n              <u-badge :count=\"menuCartNum(item.id)\" :offset=\"[-10, -10]\" size=\"mini\"></u-badge>\n            </view>\n          </view>\n        </scroll-view>\n\n        <!-- 右侧商品列表 -->\n        <scroll-view class=\"goods\" scroll-y :scroll-top=\"cateScrollTop\" @scroll=\"handleGoodsScroll\">\n          <view class=\"wrapper\">\n            <!-- 轮播广告 -->\n            <swiper class=\"ads\" autoplay :interval=\"3000\" indicator-dots>\n              <swiper-item v-for=\"(item, index) in ads\" :key=\"index\">\n                <u-image :src=\"item.image\" width=\"100%\" height=\"200rpx\" radius=\"8\"></u-image>\n              </swiper-item>\n            </swiper>\n\n            <!-- 商品分类 -->\n            <view class=\"list\">\n              <view class=\"category\" v-for=\"(item, index) in goods\" :key=\"index\" :id=\"`cate-${item.id}`\">\n                <view class=\"title\">\n                  <text>{{ item.name }}</text>\n                  <u-image :src=\"item.icon\" width=\"30rpx\" height=\"30rpx\"></u-image>\n                </view>\n                <view class=\"items\">\n                  <!-- 商品项 -->\n                  <view class=\"good\" v-for=\"(good, key) in item.goods_list\" :key=\"key\">\n                    <u-image :src=\"good.images\" width=\"160rpx\" height=\"160rpx\" radius=\"8\" @click=\"showGoodDetailModal(item, good)\"></u-image>\n                    <view class=\"right\">\n                      <text class=\"name\">{{ good.name }}</text>\n                      <text class=\"tips\">{{ good.content }}</text>\n                      <view class=\"price_and_action\">\n                        <text class=\"price\">￥{{ good.price }}</text>\n                        <view class=\"btn-group\" v-if=\"good.use_property\">\n                          <u-button\n                            type=\"primary\"\n                            size=\"mini\"\n                            shape=\"circle\"\n                            text=\"选规格\"\n                            @click=\"showGoodDetailModal(item, good)\"\n                          ></u-button>\n                          <u-badge :count=\"goodCartNum(good.id)\" :offset=\"[-10, -10]\" size=\"mini\"></u-badge>\n                        </view>\n                        <view class=\"btn-group\" v-else>\n                          <u-button\n                            type=\"default\"\n                            size=\"mini\"\n                            shape=\"circle\"\n                            plain\n                            icon=\"minus\"\n                            v-if=\"goodCartNum(good.id)\"\n                            @click=\"handleReduceFromCart(item, good)\"\n                          ></u-button>\n                          <view class=\"number\" v-if=\"goodCartNum(good.id)\">{{ goodCartNum(good.id) }}</view>\n                          <u-button\n                            type=\"primary\"\n                            size=\"mini\"\n                            shape=\"circle\"\n                            icon=\"plus\"\n                            @click=\"handleAddToCart(item, good, 1)\"\n                          ></u-button>\n                        </view>\n                      </view>\n                    </view>\n                  </view>\n                </view>\n              </view>\n            </view>\n          </view>\n        </scroll-view>\n      </view>\n\n      <!-- 购物车栏 -->\n      <view class=\"cart-box\" v-if=\"cart.length > 0\">\n        <view class=\"mark\" @click=\"openCartPopup\">\n          <u-image src=\"/static/images/menu/cart.png\" width=\"60rpx\" height=\"60rpx\"></u-image>\n          <u-badge :count=\"getCartGoodsNumber\" :offset=\"[-10, -10]\" size=\"mini\"></u-badge>\n        </view>\n        <view class=\"price\">￥{{ getCartGoodsPrice }}</view>\n        <u-button\n          type=\"primary\"\n          shape=\"circle\"\n          :disabled=\"disabledPay\"\n          @click=\"toPay\"\n          :custom-style=\"{ padding: '0 40rpx' }\"\n        >\n          {{ disabledPay ? `差${spread}元起送` : '去结算' }}\n        </u-button>\n      </view>\n    </view>\n\n    <!-- 商品详情弹窗 -->\n    <u-popup :show=\"goodDetailModalVisible\" mode=\"bottom\" round=\"16\" @close=\"closeGoodDetailModal\">\n      <view class=\"good-detail-modal\">\n        <view class=\"cover\">\n          <u-image :src=\"good.images\" width=\"100%\" height=\"400rpx\"></u-image>\n          <view class=\"btn-group\">\n            <u-image src=\"/static/images/menu/share-good.png\" width=\"50rpx\" height=\"50rpx\"></u-image>\n            <u-image src=\"/static/images/menu/close.png\" width=\"50rpx\" height=\"50rpx\" @click=\"closeGoodDetailModal\"></u-image>\n          </view>\n        </view>\n        <scroll-view class=\"detail\" scroll-y>\n          <view class=\"wrapper\">\n            <view class=\"basic\">\n              <view class=\"name\">{{ good.name }}</view>\n              <view class=\"tips\">{{ good.content }}</view>\n            </view>\n            <view class=\"properties\" v-if=\"good.use_property\">\n              <view class=\"property\" v-for=\"(item, index) in good.property\" :key=\"index\">\n                <view class=\"title\">\n                  <text class=\"name\">{{ item.name }}</text>\n                  <view class=\"desc\" v-if=\"item.desc\">({{ item.desc }})</view>\n                </view>\n                <view class=\"values\">\n                  <u-tag\n                    v-for=\"(value, key) in item.values\"\n                    :key=\"key\"\n                    :text=\"value.value\"\n                    :type=\"value.is_default ? 'primary' : 'info'\"\n                    shape=\"circle\"\n                    @click=\"changePropertyDefault(index, key)\"\n                  ></u-tag>\n                </view>\n              </view>\n            </view>\n          </view>\n        </scroll-view>\n        <view class=\"action\">\n          <view class=\"left\">\n            <view class=\"price\">￥{{ good.price }}</view>\n            <view class=\"props\" v-if=\"getGoodSelectedProps(good)\">\n              {{ getGoodSelectedProps(good) }}\n            </view>\n          </view>\n          <view class=\"btn-group\">\n            <u-button type=\"default\" size=\"mini\" shape=\"circle\" plain icon=\"minus\" @click=\"handlePropertyReduce\"></u-button>\n            <view class=\"number\">{{ good.number }}</view>\n            <u-button type=\"primary\" size=\"mini\" shape=\"circle\" icon=\"plus\" @click=\"handlePropertyAdd\"></u-button>\n          </view>\n        </view>\n        <view class=\"add-to-cart-btn\" @click=\"handleAddToCartInModal\">\n          <text>加入购物车</text>\n        </view>\n      </view>\n    </u-popup>\n\n    <!-- 购物车弹窗 -->\n    <u-popup :show=\"cartPopupVisible\" mode=\"bottom\" round=\"16\" @close=\"cartPopupVisible = false\">\n      <view class=\"cart-popup\">\n        <view class=\"top\">\n          <text @click=\"handleCartClear\">清空</text>\n        </view>\n        <scroll-view class=\"cart-list\" scroll-y>\n          <view class=\"wrapper\">\n            <view class=\"item\" v-for=\"(item, index) in cart\" :key=\"index\">\n              <view class=\"left\">\n                <view class=\"name\">{{ item.name }}</view>\n                <view class=\"props\">{{ item.props_text }}</view>\n              </view>\n              <view class=\"center\">\n                <text>￥{{ item.price }}</text>\n              </view>\n              <view class=\"right\">\n                <u-button type=\"default\" size=\"mini\" shape=\"circle\" plain icon=\"minus\" @click=\"handleCartItemReduce(index)\"></u-button>\n                <view class=\"number\">{{ item.number }}</view>\n                <u-button type=\"primary\" size=\"mini\" shape=\"circle\" icon=\"plus\" @click=\"handleCartItemAdd(index)\"></u-button>\n              </view>\n            </view>\n            <view class=\"item\" v-if=\"orderType == 'takeout' && store.packing_fee\">\n              <view class=\"left\">\n                <view class=\"name\">包装费</view>\n              </view>\n              <view class=\"center\">\n                <text>￥{{ parseFloat(store.packing_fee) }}</text>\n              </view>\n              <view class=\"right invisible\">\n                <u-button type=\"default\" size=\"mini\" shape=\"circle\" plain icon=\"minus\"></u-button>\n                <view class=\"number\">1</view>\n                <u-button type=\"primary\" size=\"mini\" shape=\"circle\" icon=\"plus\"></u-button>\n              </view>\n            </view>\n          </view>\n        </scroll-view>\n      </view>\n    </u-popup>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      loading: true,\n      orderType: 'takein', // takein / takeout\n      store: {\n        name: '示例店铺',\n        distance_text: '1.2km',\n        min_price: 20,\n        packing_fee: 2,\n      },\n      address: {\n        street: '北京市朝阳区建国路88号',\n      },\n      goods: [\n        {\n          id: 1,\n          name: '热销推荐',\n          icon: 'https://via.placeholder.com/30',\n          goods_list: [\n            {\n              id: 101,\n              name: '示例商品1',\n              content: '这是商品描述',\n              price: 25,\n              images: 'https://via.placeholder.com/160',\n              use_property: false,\n              number: 1,\n            },\n            {\n              id: 102,\n              name: '示例商品2',\n              content: '这是商品描述',\n              price: 30,\n              images: 'https://via.placeholder.com/160',\n              use_property: true,\n              property: [\n                {\n                  name: '温度',\n                  desc: '选择温度',\n                  values: [\n                    { value: '热饮', id: 1, is_default: 1 },\n                    { value: '常温', id: 2, is_default: 0 },\n                    { value: '去冰', id: 3, is_default: 0 },\n                  ],\n                },\n              ],\n              number: 1,\n            },\n          ],\n        },\n        {\n          id: 2,\n          name: '新品上市',\n          icon: 'https://via.placeholder.com/30',\n          goods_list: [\n            {\n              id: 201,\n              name: '新品1',\n              content: '新品上市',\n              price: 35,\n              images: 'https://via.placeholder.com/160',\n              use_property: true,\n              property: [\n                {\n                  name: '糖度',\n                  desc: '选择糖度',\n                  values: [\n                    { value: '全糖', id: 1, is_default: 1 },\n                    { value: '半糖', id: 2, is_default: 0 },\n                    { value: '无糖', id: 3, is_default: 0 },\n                  ],\n                },\n              ],\n              number: 1,\n            },\n          ],\n        },\n      ],\n      ads: [\n        { image: 'https://img-shop.qmimg.cn/s23107/2020/04/27/4ebdb582a5185358c4.jpg' },\n        { image: 'https://images.qmai.cn/s23107/2020/05/08/c25de6ef72d2890630.png' },\n      ],\n      currentCateId: 1,\n      cateScrollTop: 0,\n      menuScrollIntoView: '',\n      cart: [],\n      goodDetailModalVisible: false,\n      good: {},\n      cartPopupVisible: false,\n    };\n  },\n  computed: {\n    goodCartNum() {\n      return (id) => this.cart.reduce((acc, cur) => (cur.id === id ? acc + cur.number : acc), 0);\n    },\n    menuCartNum() {\n      return (id) => this.cart.reduce((acc, cur) => (cur.cate_id === id ? acc + cur.number : acc), 0);\n    },\n    getCartGoodsNumber() {\n      return this.cart.reduce((acc, cur) => acc + cur.number, 0);\n    },\n    getCartGoodsPrice() {\n      return this.cart.reduce((acc, cur) => acc + cur.number * cur.price, 0);\n    },\n    disabledPay() {\n      return this.orderType === 'takeout' && this.getCartGoodsPrice < this.store.min_price;\n    },\n    spread() {\n      return this.orderType === 'takeout' ? (this.store.min_price - this.getCartGoodsPrice).toFixed(2) : 0;\n    },\n  },\n  methods: {\n    SET_ORDER_TYPE(type) {\n      this.orderType = type;\n    },\n    takout() {\n      if (this.orderType === 'takeout') return;\n      uni.navigateTo({ url: '/pages/address/address?is_choose=true' });\n    },\n    handleMenuTap(id) {\n      this.currentCateId = id;\n      this.menuScrollIntoView = `cate-${id}`;\n    },\n    handleGoodsScroll() {\n      // 实际项目中需要计算联动逻辑\n    },\n    handleAddToCart(cate, good, num) {\n      const index = this.cart.findIndex(\n        (item) => item.id === good.id && item.props_text === good.props_text,\n      );\n      if (index > -1) {\n        this.cart[index].number += num;\n      } else {\n        this.cart.push({\n          id: good.id,\n          cate_id: cate.id,\n          name: good.name,\n          price: good.price,\n          number: num,\n          image: good.images,\n          use_property: good.use_property,\n          props_text: good.props_text,\n          props: good.props,\n        });\n      }\n    },\n    handleReduceFromCart(item, good) {\n      const index = this.cart.findIndex((i) => i.id === good.id);\n      if (index > -1) {\n        this.cart[index].number -= 1;\n        if (this.cart[index].number <= 0) {\n          this.cart.splice(index, 1);\n        }\n      }\n    },\n    showGoodDetailModal(item, good) {\n      this.good = JSON.parse(JSON.stringify({ ...good, number: 1 }));\n      this.goodDetailModalVisible = true;\n    },\n    closeGoodDetailModal() {\n      this.goodDetailModalVisible = false;\n    },\n    changePropertyDefault(index, key) {\n      this.good.property.forEach((p, i) => {\n        p.values.forEach((v, j) => {\n          this.$set(this.good.property[i].values[j], 'is_default', i === index && j === key ? 1 : 0);\n        });\n      });\n    },\n    getGoodSelectedProps(good, type = 'text') {\n      if (!good.use_property) return '';\n      const props = [];\n      good.property.forEach((p) => {\n        p.values.forEach((v) => {\n          if (v.is_default) {\n            props.push(type === 'text' ? v.value : v.id);\n          }\n        });\n      });\n      return type === 'text' ? props.join('，') : props;\n    },\n    handlePropertyAdd() {\n      this.good.number += 1;\n    },\n    handlePropertyReduce() {\n      if (this.good.number > 1) this.good.number -= 1;\n    },\n    handleAddToCartInModal() {\n      const product = {\n        ...this.good,\n        props_text: this.getGoodSelectedProps(this.good),\n        props: this.getGoodSelectedProps(this.good, 'id'),\n      };\n      this.handleAddToCart({ id: this.good.cate_id }, product, this.good.number);\n      this.closeGoodDetailModal();\n    },\n    openCartPopup() {\n      this.cartPopupVisible = true;\n    },\n    handleCartClear() {\n      uni.showModal({\n        title: '提示',\n        content: '确定清空购物车么',\n        success: ({ confirm }) => {\n          if (confirm) {\n            this.cart = [];\n            this.cartPopupVisible = false;\n          }\n        },\n      });\n    },\n    handleCartItemAdd(index) {\n      this.cart[index].number += 1;\n    },\n    handleCartItemReduce(index) {\n      if (this.cart[index].number === 1) {\n        this.cart.splice(index, 1);\n      } else {\n        this.cart[index].number -= 1;\n      }\n    },\n    toPay() {\n      uni.navigateTo({ url: '/pages/pay/pay' });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n}\n\n.main {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.nav {\n  background-color: #fff;\n  padding: 20rpx;\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.1);\n}\n\n.header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20rpx;\n}\n\n.store-name {\n  display: flex;\n  align-items: center;\n  font-size: 32rpx;\n  font-weight: bold;\n}\n\n.store-location {\n  display: flex;\n  align-items: center;\n  font-size: 24rpx;\n  color: #666;\n  margin-top: 10rpx;\n}\n\n.right {\n  display: flex;\n}\n\n.dinein,\n.takeout {\n  padding: 10rpx 20rpx;\n  border-radius: 30rpx;\n  font-size: 24rpx;\n  margin-left: 10rpx;\n}\n\n.dinein.active,\n.takeout.active {\n  background-color: #000;\n  color: #fff;\n}\n\n.coupon {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: #f8f8f8;\n  padding: 15rpx;\n  border-radius: 8rpx;\n  font-size: 24rpx;\n}\n\n.content {\n  flex: 1;\n  display: flex;\n  overflow: hidden;\n}\n\n.menus {\n  width: 180rpx;\n  background-color: #f8f8f8;\n}\n\n.menu {\n  padding: 30rpx 20rpx;\n  text-align: center;\n  font-size: 26rpx;\n  position: relative;\n}\n\n.menu.current {\n  background-color: #fff;\n  color: #000;\n  font-weight: bold;\n}\n\n.goods {\n  flex: 1;\n}\n\n.ads {\n  height: 200rpx;\n  margin: 20rpx;\n}\n\n.category {\n  margin-bottom: 30rpx;\n}\n\n.category .title {\n  padding: 20rpx;\n  font-size: 28rpx;\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n}\n\n.good {\n  display: flex;\n  padding: 20rpx;\n  border-bottom: 1rpx solid #f0f0f0;\n}\n\n.good .right {\n  flex: 1;\n  margin-left: 20rpx;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n.good .name {\n  font-size: 28rpx;\n  font-weight: bold;\n}\n\n.good .tips {\n  font-size: 24rpx;\n  color: #999;\n  margin: 10rpx 0;\n}\n\n.price_and_action {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.price {\n  color: #ff5339;\n  font-size: 32rpx;\n  font-weight: bold;\n}\n\n.btn-group {\n  display: flex;\n  align-items: center;\n}\n\n.number {\n  margin: 0 15rpx;\n  font-size: 28rpx;\n  min-width: 30rpx;\n  text-align: center;\n}\n\n.cart-box {\n  display: flex;\n  align-items: center;\n  padding: 20rpx;\n  background-color: #3d3d3d;\n  color: #fff;\n}\n\n.mark {\n  position: relative;\n}\n\n.price {\n  flex: 1;\n  margin-left: 30rpx;\n  font-size: 32rpx;\n  font-weight: bold;\n}\n\n.good-detail-modal {\n  background-color: #fff;\n  border-radius: 16rpx 16rpx 0 0;\n  overflow: hidden;\n  max-height: 70vh;\n}\n\n.cover {\n  position: relative;\n}\n\n.btn-group {\n  position: absolute;\n  right: 20rpx;\n  top: 20rpx;\n  display: flex;\n}\n\n.btn-group image {\n  width: 50rpx;\n  height: 50rpx;\n  margin-left: 20rpx;\n}\n\n.detail {\n  max-height: 40vh;\n  overflow-y: auto;\n}\n\n.basic {\n  padding: 20rpx;\n}\n\n.properties {\n  padding: 20rpx;\n}\n\n.property {\n  margin-bottom: 30rpx;\n}\n\n.property .title {\n  display: flex;\n  align-items: center;\n  margin-bottom: 20rpx;\n}\n\n.values {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20rpx;\n}\n\n.action {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20rpx;\n  border-top: 1rpx solid #f0f0f0;\n}\n\n.add-to-cart-btn {\n  background-color: #000;\n  color: #fff;\n  text-align: center;\n  padding: 20rpx;\n  font-size: 32rpx;\n}\n\n.cart-popup {\n  background-color: #fff;\n  border-radius: 16rpx 16rpx 0 0;\n  padding: 20rpx;\n  max-height: 70vh;\n}\n\n.top {\n  text-align: right;\n  padding: 20rpx;\n  border-bottom: 1rpx solid #f0f0f0;\n}\n\n.cart-list {\n  max-height: 60vh;\n  overflow-y: auto;\n}\n\n.item {\n  display: flex;\n  padding: 20rpx;\n  border-bottom: 1rpx solid #f0f0f0;\n  align-items: center;\n}\n\n.item .left {\n  flex: 2;\n}\n\n.item .center {\n  flex: 1;\n  text-align: center;\n  font-size: 28rpx;\n  color: #ff5339;\n}\n\n.item .right {\n  flex: 2;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.invisible {\n  visibility: hidden;\n}\n</style>","import mod from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./city.vue?vue&type=style&index=0&id=5fb12034&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./city.vue?vue&type=style&index=0&id=5fb12034&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1753600549057\n      var cssReload = require(\"D:/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}