<view class="page data-v-0b31f540"><view class="map-container data-v-0b31f540" style="{{'height:'+(mapHeight+'px')+';'}}"><map class="map data-v-0b31f540" id="storeMap" latitude="{{currentLocation.latitude}}" longitude="{{currentLocation.longitude}}" markers="{{markers}}" show-location="{{true}}" data-event-opts="{{[['markertap',[['onMarkerTap',['$event']]]]]}}" bindmarkertap="__e"></map><view data-event-opts="{{[['tap',[['getUserLocation',['$event']]]]]}}" class="locate-btn data-v-0b31f540" bindtap="__e"><u-icon vue-id="5b0d33c6-1" name="map-fill" color="#333" size="20" class="data-v-0b31f540" bind:__l="__l"></u-icon></view></view><view class="store-list-container data-v-0b31f540" style="{{'top:'+(mapHeight-30+'px')+';'}}"><view class="search-section data-v-0b31f540"><view class="search-bar data-v-0b31f540"><view class="search-content data-v-0b31f540"><view data-event-opts="{{[['tap',[['navigateToCity',['$event']]]]]}}" class="city-selector data-v-0b31f540" bindtap="__e"><u-text class="city-text data-v-0b31f540" vue-id="5b0d33c6-2" text="枣庄市" bind:__l="__l"></u-text><u-icon vue-id="5b0d33c6-3" name="arrow-down" size="12" color="#666" class="data-v-0b31f540" bind:__l="__l"></u-icon></view><view class="search-box data-v-0b31f540"><u-search vue-id="5b0d33c6-4" placeholder="搜索门店" shape="round" bgColor="#f8f9fa" showAction="{{false}}" value="{{searchKey}}" data-event-opts="{{[['^search',[['handleSearch']]],['^clear',[['handleSearch']]],['^input',[['__set_model',['','searchKey','$event',[]]]]]]}}" bind:search="__e" bind:clear="__e" bind:input="__e" class="data-v-0b31f540" bind:__l="__l"></u-search></view></view></view></view><scroll-view class="store-list data-v-0b31f540" style="{{'height:'+('calc(100vh - '+mapHeight+'px - 120rpx)')+';'}}" scroll-y="true" scroll-top="{{scrollTop}}" data-event-opts="{{[['scroll',[['handleScroll',['$event']]]]]}}" bindscroll="__e"><block wx:for="{{sortedStores}}" wx:for-item="store" wx:for-index="__i0__" wx:key="id"><view data-event-opts="{{[['tap',[['selectStore',['$0'],[[['sortedStores','id',store.id]]]]]]]}}" class="store-card data-v-0b31f540" bindtap="__e"><view class="store-image data-v-0b31f540"><u-image vue-id="{{'5b0d33c6-5-'+__i0__}}" src="{{store.image||defaultStoreImage}}" width="120rpx" height="120rpx" radius="12rpx" mode="aspectFill" lazyLoad="{{true}}" class="data-v-0b31f540" bind:__l="__l"></u-image></view><view class="store-info data-v-0b31f540"><view class="store-header data-v-0b31f540"><u-text class="store-name data-v-0b31f540" vue-id="{{'5b0d33c6-6-'+__i0__}}" text="{{store.name}}" bind:__l="__l"></u-text><u-text class="store-distance data-v-0b31f540" vue-id="{{'5b0d33c6-7-'+__i0__}}" text="{{store.distance+'km'}}" align="right" bind:__l="__l"></u-text></view><block wx:if="{{store.making}}"><view class="store-status data-v-0b31f540"><u-tag vue-id="{{'5b0d33c6-8-'+__i0__}}" text="{{store.making}}" size="mini" type="warning" plain="{{true}}" class="data-v-0b31f540" bind:__l="__l"></u-tag></view></block><view class="store-address data-v-0b31f540">{{store.address}}</view><view class="store-meta data-v-0b31f540"><u-text class="business-time data-v-0b31f540" vue-id="{{'5b0d33c6-9-'+__i0__}}" text="{{store.time}}" bind:__l="__l"></u-text><block wx:if="{{store.takeaway}}"><u-text class="takeaway-tag data-v-0b31f540" vue-id="{{'5b0d33c6-10-'+__i0__}}" text="可外卖" align="center" bind:__l="__l"></u-text></block></view><view data-event-opts="{{[['tap',[['makePhoneCall',['$0'],[[['sortedStores','id',store.id,'phone']]]]]]]}}" class="store-contact data-v-0b31f540" catchtap="__e"><u-icon vue-id="{{'5b0d33c6-11-'+__i0__}}" name="phone" size="16" color="#ff6b35" class="data-v-0b31f540" bind:__l="__l"></u-icon><u-text class="phone-text data-v-0b31f540" vue-id="{{'5b0d33c6-12-'+__i0__}}" text="{{store.phone}}" bind:__l="__l"></u-text></view></view><view class="select-btn data-v-0b31f540"><u-icon vue-id="{{'5b0d33c6-13-'+__i0__}}" name="arrow-right" size="16" color="#ccc" class="data-v-0b31f540" bind:__l="__l"></u-icon></view></view></block><block wx:if="{{!$root.g0}}"><view class="empty-state data-v-0b31f540"><u-empty vue-id="5b0d33c6-14" mode="list" marginTop="120rpx" class="data-v-0b31f540" bind:__l="__l"></u-empty></view></block></scroll-view></view></view>