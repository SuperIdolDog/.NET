<view class="page data-v-705870f2"><view class="map-container data-v-705870f2" style="{{'height:'+(mapHeight+'px')+';'}}"><map class="map data-v-705870f2" id="plazaMap" latitude="{{currentLocation.latitude}}" longitude="{{currentLocation.longitude}}" markers="{{markers}}" show-location="{{true}}" enable-zoom="{{true}}" enable-scroll="{{true}}" enable-rotate="{{false}}" scale="{{scale}}" min-scale="{{3}}" max-scale="{{20}}"></map><view data-event-opts="{{[['tap',[['getUserLocation',['$event']]]]]}}" class="locate-btn data-v-705870f2" bindtap="__e"><u-icon vue-id="ca93a358-1" name="map-fill" color="#333" size="20" class="data-v-705870f2" bind:__l="__l"></u-icon></view><view class="zoom-controls data-v-705870f2"><view data-event-opts="{{[['tap',[['zoomOut',['$event']]]]]}}" class="zoom-btn data-v-705870f2" bindtap="__e"><u-icon vue-id="ca93a358-2" name="plus" color="#333" size="20" class="data-v-705870f2" bind:__l="__l"></u-icon></view><view data-event-opts="{{[['tap',[['zoomIn',['$event']]]]]}}" class="zoom-btn data-v-705870f2" bindtap="__e"><u-icon vue-id="ca93a358-3" name="minus" color="#333" size="20" class="data-v-705870f2" bind:__l="__l"></u-icon></view></view></view><view class="plaza-list-container data-v-705870f2" style="{{'top:'+(mapHeight-30+'px')+';'}}"><view class="search-section data-v-705870f2"><view class="search-bar data-v-705870f2"><view class="search-content data-v-705870f2"><view data-event-opts="{{[['tap',[['navigateToCity',['$event']]]]]}}" class="city-selector data-v-705870f2" bindtap="__e"><u-text class="city-text data-v-705870f2" vue-id="ca93a358-4" text="{{selectedCity}}" bind:__l="__l"></u-text><u-icon vue-id="ca93a358-5" name="arrow-down" size="12" color="#666" class="data-v-705870f2" bind:__l="__l"></u-icon></view><u-search vue-id="ca93a358-6" placeholder="搜索广场" shape="round" bgColor="#f8f9fa" showAction="{{false}}" value="{{searchKey}}" data-event-opts="{{[['^search',[['handleSearch']]],['^clear',[['handleSearch']]],['^input',[['__set_model',['','searchKey','$event',[]]]]]]}}" bind:search="__e" bind:clear="__e" bind:input="__e" class="data-v-705870f2" bind:__l="__l"></u-search></view></view></view><scroll-view class="plaza-list data-v-705870f2" style="{{'height:'+('calc(100vh - '+mapHeight+'px - 120rpx)')+';'}}" scroll-y="{{true}}" scroll-top="{{scrollTop}}" data-event-opts="{{[['scroll',[['handleScroll',['$event']]]]]}}" bindscroll="__e"><view class="list-center data-v-705870f2"><block wx:for="{{sortedplazas}}" wx:for-item="plaza" wx:for-index="__i0__" wx:key="id"><view data-event-opts="{{[['tap',[['selectplaza',['$0'],[[['sortedplazas','id',plaza.id]]]]]]]}}" class="plaza-card data-v-705870f2" bindtap="__e"><view class="plaza-info data-v-705870f2"><view class="plaza-header data-v-705870f2"><u-text class="plaza-name data-v-705870f2" vue-id="{{'ca93a358-7-'+__i0__}}" text="{{plaza.name}}" bind:__l="__l"></u-text><u-text class="plaza-distance data-v-705870f2" vue-id="{{'ca93a358-8-'+__i0__}}" text="{{plaza.distance+'km'}}" align="right" bind:__l="__l"></u-text></view><view class="plaza-address data-v-705870f2">{{plaza.address}}</view></view><u-icon vue-id="{{'ca93a358-9-'+__i0__}}" name="arrow-right" size="16" color="#ccc" class="data-v-705870f2" bind:__l="__l"></u-icon></view></block><block wx:if="{{!$root.g0}}"><view class="empty-state data-v-705870f2"><u-empty vue-id="ca93a358-10" mode="list" marginTop="120rpx" class="data-v-705870f2" bind:__l="__l"></u-empty></view></block></view></scroll-view></view></view>